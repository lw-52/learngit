{"version":3,"sources":["pages/navigator/index.jsx","pages/home/index.jsx","utils/request.js","pages/register/store/actionCreators.js","pages/register/RegisterForm.jsx","pages/register/index.jsx","pages/login/index.jsx","pages/flash/FlashItem.jsx","App.jsx","pages/flash/index.jsx","store/reducer.js","pages/register/store/reducer.js","store/index.js","index.js"],"names":["Index","className","to","id","Component","Home","axios","registerAc","data","dispatch","post","RegisterForm","state","img","getMedia","video","document","getElementById","navigator","mediaDevices","getUserMedia","width","height","audio","then","MediaStream","srcObject","play","dataURLtoBlob","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","type","blobToFile","theBlob","fileName","lastModifiedDate","Date","name","takePhoto","e","a","preventDefault","canvas","getContext","drawImage","base64Data","toDataURL","data1","substr","console","log","setState","image","props","registerFn","undefined","window","location","hash","this","autoPlay","style","display","onClick","title","withRouter","Register","connect","registerData","register","bindActionCreators","registerActionCreators","login","htmlFor","FlashItem","role","data-dismiss","aria-label","aria-hidden","App","path","exact","component","Login","combineReducers","action","createStore","reducer","applyMiddleware","logger","thunk","ReactDOM","render","store","querySelector"],"mappings":"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","file":"static/js/main.654a4af4.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nexport default class Index extends Component {\r\n    render() {\r\n        return (\r\n            <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n                <Link className=\"navbar-brand\" to=\"/\">home</Link>\r\n                {/*<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"*/}\r\n                {/*        data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"*/}\r\n                {/*        aria-expanded=\"false\" aria-label=\"Toggle navigation\">niubi*/}\r\n                {/*    <span className=\"navbar-toggler-icon\"></span>*/}\r\n                {/*</button>*/}\r\n\r\n                <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n                    <ul className=\"navbar-nav mr-auto\">\r\n                        <li className=\"nav-item active\">\r\n                            <Link className=\"nav-link\" to=\"/register\">Sign up</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link className=\"nav-link\" to=\"/login\">Sign in</Link>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nexport default class Home extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"jumbotron\">\r\n                <h1 className=\"display-4\">你好</h1>\r\n                <p className=\"lead\">识别人脸</p>\r\n                <hr className=\"my-4\"/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n","import axios from 'axios'\r\nexport default axios;","import axios from '../../../utils/request'\r\nexport const registerAc = data =>{\r\n    return dispatch=>{\r\n       // axios.defaults.baseURL=\"\"\r\n       return axios.post('/api/register',data)\r\n   }\r\n};","import React, {Component} from 'react';\r\nimport classnames from \"classnames\";\r\nimport {withRouter} from 'react-router-dom'//做跳转用的\r\nimport cssObj from \"./css/1.css\"\r\nclass RegisterForm extends Component {\r\n\r\n    state = {\r\n        img:\"这是个图片的默认值\"\r\n    }\r\n    getMedia = ()=>{\r\n        let constraints = {\r\n            //参数\r\n            video: {width: 500, height: 500},\r\n            audio: true\r\n        };\r\n        //获得video摄像头区域\r\n        let video = document.getElementById(\"video\");\r\n        //返回的Promise对象\r\n        let promise = navigator.mediaDevices.getUserMedia(constraints);\r\n        //then()异步，调用MediaStream对象作为参数\r\n        promise.then(function (MediaStream){\r\n            video.srcObject = MediaStream;\r\n            video.play();\r\n        })\r\n    }\r\n    //下面是把base64转换file的函数\r\n    //将base64转换为blob\r\n    dataURLtoBlob= (dataurl) => {\r\n        var arr = dataurl.split(','),\r\n            mime = arr[0].match(/:(.*?);/)[1],\r\n            bstr = atob(arr[1]),\r\n            n = bstr.length,\r\n            u8arr = new Uint8Array(n);\r\n        while (n--) {\r\n            u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        return new Blob([u8arr], { type: mime });\r\n    }\r\n    //将blob转换为file\r\n    blobToFile=(theBlob, fileName)=>{\r\n        theBlob.lastModifiedDate = new Date();\r\n        theBlob.name = fileName;\r\n        return theBlob;\r\n    }\r\n    //调用\r\n\r\n    takePhoto = async e=>{\r\n        //获得Canvas对象\r\n        e.preventDefault();\r\n        let video = document.getElementById(\"video\");\r\n        let canvas = document.getElementById(\"canvas\");\r\n        let context = canvas.getContext('2d');\r\n        //绘图\r\n        context.drawImage(video, 0, 0, 300, 400);\r\n        //console.log(canvas)\r\n        //console.log(context)\r\n        let base64Data = canvas.toDataURL(\"image/png\",0.92);\r\n        //这是base64Data数据\r\n        //console.log(base64Data)\r\n        //这是data数据\r\n        var data1=base64Data.substr(22);\r\n        console.log(data1)\r\n        this.setState({\r\n            image:\"hgjg\",\r\n            //img:data1\r\n        })\r\n        // var imgName = \"路上\"\r\n        // var blob = this.dataURLtoBlob(base64Data);\r\n        // var file = this.blobToFile(blob, imgName);\r\n        // //这是要发送的数据\r\n        // console.log(file)\r\n        const {data}=await this.props.registerFn.registerAc(this.state);\r\n        console.log(\"这是传回来的数据\")\r\n        console.log(data)\r\n        // {this.props.history.push('/success')}\r\n    }\r\n    componentDidMount() {\r\n        if (window.location.hash.split('/')[1]==undefined||window.location.hash.split('/')[1]==\"\"){\r\n            // 第一种通过DOM元素获取标签并执行点击事件\r\n            this.getMedia()\r\n        }\r\n    }\r\n    render() {\r\n        //const {username, email, password, passwordConfirm} = this.state.userInfo;\r\n        return (\r\n            <div className=\"auto\" >\r\n                <video id=\"video\" width=\"480\" height=\"320\" autoPlay/>\r\n                <canvas id=\"canvas\" width=\"480\" height=\"320\" style={{display: \"none\"}} />\r\n                <div>\r\n                    <button id=\"sure\" onClick={this.takePhoto} title=\"拍照\">拍照</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(RegisterForm);//做跳转用的\r\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {actionCreators as registerActionCreators} from './store';\r\nimport {bindActionCreators} from \"redux\";\r\nimport RegisterForm from \"./RegisterForm\";\r\nclass Register extends Component {\r\n    render() {\r\n        return <RegisterForm{...this.props}/>\r\n    }\r\n}\r\nconst mapStateToProps = state=>{\r\n    return {\r\n        registerData:state.register\r\n    }\r\n}\r\n//去映射actionCreator里面的东西\r\nconst mapDispatchToProps = dispatch=>{\r\n    return {\r\n        registerFn:bindActionCreators(registerActionCreators,dispatch)\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Register);\r\n","import React, {Component} from 'react';\r\n\r\nexport default class login extends Component {\r\n    render() {\r\n        return (\r\n            <form>、\r\n                {/*Username*/}\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"username\">username</label>\r\n                    <input type=\"email\" className=\"form-control\" id=\"username\"/>\r\n                </div>\r\n                {/*password*/}\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input type=\"password\" className=\"form-control\" id=\"password\"/>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-primary\">Sign in</button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nexport default class FlashItem extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"alert alert-primary\" role=\"alert\">\r\n                收到反馈\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"close\"\r\n                    data-dismiss=\"alert\"\r\n                    aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">关闭</span>\r\n                </button>\r\n            </div> );\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {BrowserRouter as Router,Switch,Route} from 'react-router-dom';\r\n//导航\r\nimport Navigator from './pages/navigator'\r\n//首页\r\nimport Home from './pages/home'\r\n//注册\r\nimport Register from './pages/register'\r\n//登录\r\nimport Login from './pages/login'\r\n//提示\r\nimport Flash from './pages/flash'\r\n\r\nexport default class App extends Component {\r\n    render() {\r\n        return (\r\n            <Router>\r\n                <Navigator/>\r\n                {/*<Flash/>*/}\r\n                <switch>\r\n                <Route path=\"/\" exact component={Home}/>\r\n                <Route path=\"/login\" exact component={Login}/>\r\n                <Route path=\"/register\" exact component={Register}/>\r\n                </switch>\r\n            </Router>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport FlashItem from \"./FlashItem\";\r\nexport default class Flash extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n<FlashItem></FlashItem>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","//结合所有的reducer\r\nimport {reducer as registerReducer} from '../pages/register/store'\r\nimport {combineReducers} from \"redux\";\r\nexport default combineReducers({\r\n    register:registerReducer\r\n})","export default (state={},action)=>{\r\n    switch (action.type) {\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","//创建store\r\nimport {createStore,applyMiddleware} from \"redux\";\r\nimport reducer from './reducer';\r\nimport thunk from \"redux-thunk\";\r\nimport logger from 'redux-logger';\r\nexport default createStore(reducer,applyMiddleware(logger,thunk))\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport store from './store'\r\nimport {Provider} from 'react-redux'\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App/>\r\n    </Provider>,\r\n    document.querySelector('#root'));"],"sourceRoot":""}